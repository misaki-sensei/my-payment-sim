<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº—èˆ—ã‚¢ãƒ—ãƒª (æ¨¡æ“¬PayPayãƒ¬ã‚¸)</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="qrcode.min.js"></script>

    <!-- Firebase SDKã®èª­ã¿è¾¼ã¿ -->
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    
    <script>
        // ã‚ãªãŸã®Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šæƒ…å ±
        const firebaseConfig = {
            apiKey: "AIzaSyC8WKf1uoTOn8-HGPwu_GHJ_2MZpmaco10",
            authDomain: "my-paypay-sim-45735.firebaseapp.com",
            databaseURL: "https://my-paypay-sim-45735-default-rtdb.asia-southeast1.firebasedatabase.app", // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‹ã‚‰æ¨æ¸¬ã•ã‚Œã‚‹URL
            projectId: "my-paypay-sim-45735",
            storageBucket: "my-paypay-sim-45735.firebasestorage.app",
            messagingSenderId: "310980051016",
            appId: "1:310980051016:web:38083c1005b783054b587d"
        };
        // Firebaseã‚’åˆæœŸåŒ–
        firebase.initializeApp(firebaseConfig);
        // Realtime Databaseã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—
        const database = firebase.database();
    </script>
</head>
<body>
    <div class="container app-container" id="appContainer">
        <div class="header">
            <h1 class="app-title">åº—èˆ—ã‚¢ãƒ—ãƒª</h1>
            <p class="shop-name">æ¨¡æ“¬PayPayãƒ¬ã‚¸</p>
        </div>

        <div class="action-section card">
            <h2 class="section-title">æ”¯æ‰•ã„é‡‘é¡è¨­å®š</h2>
            <div class="input-group">
                <label for="paymentAmount">é‡‘é¡:</label>
                <input type="number" id="paymentAmount" placeholder="æ”¯æ‰•ã„é‡‘é¡ã‚’å…¥åŠ›" min="0" value="0">
            </div>
            <button id="generateQrBtn" class="primary-btn action-btn">
                <span class="icon">ğŸ”—</span> QRã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
            </button>
        </div>

        <div class="qr-display-section card hidden" id="qrDisplaySection">
            <h2 class="section-title-small">é¡§å®¢æç¤ºç”¨QRã‚³ãƒ¼ãƒ‰</h2>
            <div class="qr-code-display">
                <div id="qrCodeCanvas" class="qr-image-canvas" aria-label="QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢"></div> 
                <p class="qr-info">
                    é¡§å®¢ã«ã“ã®QRã‚³ãƒ¼ãƒ‰ã‚’ã‚«ãƒ¡ãƒ©ã§èª­ã¿å–ã£ã¦ã‚‚ã‚‰ã£ã¦ãã ã•ã„ã€‚
                </p>
                <p class="small-text url-text" id="qrUrlText"></p>
                <p class="small-text">
                    (é‡‘é¡ã¨åº—èˆ—IDãŒå«ã¾ã‚Œã¦ã„ã¾ã™)
                </p>
            </div>
            <button id="resetAppBtn" class="secondary-btn">
                <span class="icon">ğŸ”„</span> ãƒªã‚»ãƒƒãƒˆ
            </button>
        </div>

        <div class="payment-status-section card" id="paymentStatusSection">
            <h2 class="section-title">æ”¯æ‰•ã„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>
            <p class="status-pending" id="paymentStatusText">
                <span class="icon">â³</span> é¡§å®¢ã‹ã‚‰ã®æ”¯æ‰•ã„å¾…ã¡...
            </p>
            <p id="receivedPaymentInfo" class="hidden"></p>
        </div>

        <div class="history-section card">
            <h2 class="section-title">æ”¯æ‰•ã„å®Œäº†å±¥æ­´</h2> 
            <ul id="shopTransactionHistory"></ul>
        </div>
    </div>

    <script src="shop_script.js"></script>
</body>
</html>
